<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calculator App</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0f172a">

<style>
  :root {
    --bg: #020617;
    --bg2: #1e293b;
    --text: #e5e7eb;
    --accent: #2563eb;
    --equal: #16a34a;
    --clear: #dc2626;
  }

  body {
    margin: 0; height: 100vh;
    background: var(--bg);
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: system-ui;
    transition: background 0.3s, color 0.3s;
  }

  body.light {
    --bg: #f0f0f0;
    --bg2: #ffffff;
    --text: #1e1e1e;
    --accent: #2563eb;
    --equal: #16a34a;
    --clear: #dc2626;
  }

  .calc {
    width: 280px;
    background: var(--bg2);
    border-radius: 20px;
    padding: 15px;
    box-shadow: 0 20px 50px rgba(0,0,0,.6);
  }

  input { width: 100%; height: 60px; border: none; text-align: right;
    font-size: 26px; padding: 10px; background: var(--bg2);
    color: var(--text); box-sizing: border-box;
  }

  .grid { display: grid; grid-template-columns: repeat(4,1fr); gap: 10px; margin-top:15px; }
  button { height: 55px; border-radius:14px; border:none; font-size:18px;
    background: var(--bg2); color: var(--text); transition:.2s;
  }
  button:active { transform: scale(.95); }
  .op { background: var(--accent); }
  .clear { background: var(--clear); }
  .equal { background: var(--equal); grid-row: span 2; }
  .history { margin-top:10px; max-height:100px; overflow-y:auto; background:#111; color:#eee; padding:5px; border-radius:8px; font-size:14px; }
</style>
</head>
<body>
<div class="calc">
  <input id="screen" disabled>
  <div class="grid">
    <button class="clear" onclick="clr()">C</button>
    <button onclick="add('/')">÷</button>
    <button onclick="add('*')">×</button>
    <button onclick="add('-')">−</button>

    <button onclick="add('7')">7</button>
    <button onclick="add('8')">8</button>
    <button onclick="add('9')">9</button>
    <button class="op" onclick="add('+')">+</button>

    <button onclick="add('4')">4</button>
    <button onclick="add('5')">5</button>
    <button onclick="add('6')">6</button>
    <button class="equal" onclick="calc()">=</button>

    <button onclick="add('1')">1</button>
    <button onclick="add('2')">2</button>
    <button onclick="add('3')">3</button>

    <button onclick="add('0')" style="grid-column: span 2;">0</button>
    <button onclick="add('.')">.</button>
  </div>

  <button onclick="toggleTheme()" style="margin-top:10px; width:100%;">Toggle Light/Dark</button>
  <div class="history" id="history"></div>
</div>

<script>
  const s = document.getElementById("screen");
  const h = document.getElementById("history");

  function add(v){ s.value += v; }
  function clr(){ s.value = ""; }
  function calc(){
    try {
      let res = eval(s.value);
      h.innerHTML += s.value + " = " + res + "<br>";
      s.value = res;
    } catch { s.value = "Error"; }
  }

  function toggleTheme() { document.body.classList.toggle("light"); }

  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("sw.js");
  }
</script>
</body>
</html>